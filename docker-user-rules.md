---
title: docker user route rules of network 
description: 
published: 1
date: 2024-12-04T10:14:54.163Z
tags: network, route, docker, user, iptables
editor: markdown
dateCreated: 2024-12-04T09:19:51.766Z
---

## Explanation of Adding and Deleting Rules in the DOCKER-USER Chain üõ†Ô∏è

[English](/docker-user-rules.md) | [Japanese](/ja/docker-user-rules.md) | [Chinese](/zh/docker-user-rules.md)

Docker uses iptables to manage network traffic. The `DOCKER-USER` chain is a special chain for adding custom rules related to Docker containers. This chain is evaluated before the rules generated by Docker.

---

### 1. Adding Rules ‚ûï 

To add rules to the `DOCKER-USER` chain, use the `iptables` command. The general format for adding a rule is:

```bash
sudo iptables -I DOCKER-USER -s <source_ip> -j <target_action>
```

##### Example:
To add a rule that drops traffic from a specific IP address:
```bash
sudo iptables -I DOCKER-USER -s 192.168.1.100 -j DROP
```
This command will drop all traffic from 192.168.1.100.

### 2. Deleting Rules ‚ûñ
To delete rules from the DOCKER-USER chain, use the -D option of the iptables command. You need to specify the rule number to delete a rule.

##### Displaying Rules üìú
First, display the current rules in the DOCKER-USER chain:

```bash
sudo iptables -L DOCKER-USER --line-numbers
```

##### Deleting a Rule
To delete a specific rule, specify its rule number:
```bash
sudo iptables -D DOCKER-USER <rule_number>
```

##### Example:
To delete a rule with rule number 1:
```bash
sudo iptables -D DOCKER-USER 1
```

### Summary üìù
- DOCKER-USER Chain: A chain for adding custom rules for Docker container traffic.
- Adding Rules:
  - Command: sudo iptables -I DOCKER-USER -s <source_ip> -j <target_action>
- Deleting Rules:
  - Display rules: sudo iptables -L DOCKER-USER --line-numbers
  - Delete command: sudo iptables -D DOCKER-USER <rule_number>
  
## How to Delete IP Route Rules üö¶

To delete a specific route from the routing table in Linux, you can use the `ip route` command. Here‚Äôs how to do it:

### 1. Display Current Routes üìú

Before deleting a route, you may want to view the current routing table:

```bash
ip route show
```
### 2. Delete a Specific Route ‚ûñ
To delete a specific route, use the following command format:
```bash
sudo ip route del <destination> [via <gateway>] [dev <interface>]
```
##### Example:
To delete a route to the network 192.168.1.0/24:
```bash
sudo ip route del 192.168.1.0/24
sudo ip route del 10.13.13.0/24 dev docker0 scope link
```

## How to Delete iptables NAT Rules üö´

To delete NAT rules in `iptables`, you need to know the specific chain (like `PREROUTING`, `POSTROUTING`, or `OUTPUT`) and the rule you want to remove. Here‚Äôs how to do it:

### 1. Display Current NAT Rules üìú

First, you can view the current NAT rules by using:

```bash
sudo iptables -t nat -L -n --line-numbers
```
### 2. Delete a Specific NAT Rule ‚ûñ
To delete a specific NAT rule, use the following command format:

```bash
sudo iptables -t nat -D <chain> <rule_number>
#ex:
#sudo iptables -t nat -L -n --line-numbers
#>21   MASQUERADE  all  --  10.13.13.0/24        172.27.0.0/16
sudo iptables -t nat -D POSTROUTING  21
```

